---
alwaysApply: true
---

# Cursor Rules for Dotore Admin Project

## Project Overview
This is a React 19 + TypeScript admin dashboard application using Material-UI (MUI), React Router, and TinyMCE. The project follows a component-based architecture with Context API for global state management.

## Tech Stack
- **Framework**: React 19.2.0 with TypeScript 5.9.3
- **Build Tool**: Vite 7.2.2
- **UI Library**: Material-UI (MUI) 7.3.5
- **Routing**: React Router DOM 7.9.6
- **Rich Text Editor**: TinyMCE 8.2.2 (@tinymce/tinymce-react 6.3.0)
- **State Management**: React Context API
- **Styling**: Emotion (via MUI), CSS-in-JS with `sx` prop

## Project Structure

```
src/
├── components/     # Reusable UI components
├── pages/          # Page-level components (routes)
├── context/        # React Context providers
├── utils/          # Utility functions
├── types/          # TypeScript type definitions
├── themes/         # MUI theme customization
├── data/           # Mock data and constants
└── menu-items/     # Menu items for sidebar navigation (필수: 새 페이지 생성 시 추가)
```

## Page Structure

애플리케이션의 페이지 구조는 다음과 같이 계층적으로 구성되어 있습니다:

### 인증 전 페이지 (Public Routes)
- **`/login`** - `LoginPage.tsx`
  - 로그인 페이지 (인증 필요 없음)

### 인증 후 페이지 (Private Routes - Layout 내부)
모든 인증 후 페이지는 `Layout` 컴포넌트로 감싸져 있으며, 사이드바와 상단 네비게이션을 포함합니다.

#### 메인 페이지
- **`/`** (index) - `InquiryListPage.tsx`
  - 문의 목록 페이지 (기본 페이지)

#### 문의 관리
- **`/analysis`** - `InquiryAnalysisPage.tsx`
  - 문의 분석 페이지
  - 상위: `/` (문의 목록)

#### 자동 메일 관리
- **`/auto-mail`** - `AutoMailPage.tsx`
  - 자동 메일 그룹 및 템플릿 목록 페이지
- **`/auto-mail/:groupId/:templateId`** - `MailTemplatePage.tsx`
  - 자동 메일 템플릿 편집 페이지
  - 상위: `/auto-mail` (자동 메일 목록)
  - 동적 라우트: `groupId`, `templateId` 파라미터 사용

#### 수동 메일 관리
- **`/manual-mail`** - `ManualMailPage.tsx`
  - 수동 메일 그룹 및 템플릿 목록 페이지
- **`/manual-mail/:groupId/:templateId`** - `MailTemplatePage.tsx`
  - 수동 메일 템플릿 편집 페이지
  - 상위: `/manual-mail` (수동 메일 목록)
  - 동적 라우트: `groupId`, `templateId` 파라미터 사용

### 페이지 계층 구조 요약
```
/login (인증 전)
  └─ LoginPage

/ (인증 후 - Layout)
  ├─ / (index)
  │  └─ InquiryListPage
  │
  ├─ /analysis
  │  └─ InquiryAnalysisPage
  │     └─ 상위: InquiryListPage
  │
  ├─ /auto-mail
  │  └─ AutoMailPage
  │     └─ /auto-mail/:groupId/:templateId
  │        └─ MailTemplatePage
  │           └─ 상위: AutoMailPage
  │
  └─ /manual-mail
     └─ ManualMailPage
        └─ /manual-mail/:groupId/:templateId
           └─ MailTemplatePage
              └─ 상위: ManualMailPage
```

### 페이지 파일 위치
모든 페이지 컴포넌트는 `src/pages/` 디렉토리에 위치합니다:
- `LoginPage.tsx`
- `InquiryListPage.tsx`
- `InquiryAnalysisPage.tsx`
- `AutoMailPage.tsx`
- `ManualMailPage.tsx`
- `MailTemplatePage.tsx`

## Related Documentation
이 프로젝트의 상세한 가이드라인은 다음 파일들을 참고하세요:

- **`code-style.mdc`**: 코드 스타일 및 컨벤션 (TypeScript, React Patterns, Tab-Based UI, Component Organization, Naming, MUI Usage, Context API, Routing, TinyMCE, State Management, Error Handling, File Imports, Performance, Accessibility, Testing)
- **`styling-guidelines.mdc`**: 스타일링 가이드라인 및 테이블 디자인 (Dark Mode Support, Table Design Guidelines, Table Schema Definitions)
- **`multilingual.mdc`**: 다국어 컨텐츠 관리 (Multilingual Content Management 전체)
- **`common-patterns.mdc`**: 공통 패턴 (Snackbar, Navigation, Local Storage, Theme Usage, Query Parameters)
- **`date-and-formats.mdc`**: 날짜 형식 및 특수 기능 가이드라인 (Date Format Guidelines, Auto Mail Design Guidelines)
- **`mantis-layout-guide.mdc`**: Mantis 레이아웃 구조 및 새 페이지 생성 가이드 (참고용)

## Anti-Patterns to Avoid
- Don't use `any` type - use proper types
- Don't mix controlled and uncontrolled components
- Don't create Context without Provider
- Don't use inline styles - use `sx` prop
- Don't mutate state directly - use setState
- Don't forget dependency arrays in useEffect
- Don't use `var` - use `const` or `let`
- Don't create functions in JSX without useCallback when passed to memoized components
- **Don't use hardcoded colors** - always use theme colors for dark mode compatibility
- **Don't assume light mode only** - all styling must work in both light and dark modes

## Code Formatting
- Use 2 spaces for indentation
- Use single quotes for strings (TypeScript/JavaScript)
- Use trailing commas in multi-line objects/arrays
- Use semicolons
- Maximum line length: 120 characters (soft limit)

## Mantis Layout Structure (참고용)
프로젝트는 Mantis 관리자 템플릿의 레이아웃 구조를 참고할 수 있습니다. `mantis/src/layout/Dashboard` 디렉토리에서 레이아웃 구조를 확인할 수 있습니다.

**참고사항:**
- Mantis 레이아웃은 현재 프로젝트의 `src/components/Layout.tsx`와는 별개의 구조입니다
- 현재 프로젝트는 자체 Layout 컴포넌트를 사용하며, Mantis 레이아웃은 참고용입니다
- 새 페이지 생성 시 현재 프로젝트의 Layout 구조를 따릅니다
- 상세한 Mantis 레이아웃 구조 및 새 페이지 생성 가이드는 **`mantis-layout-guide.mdc`** 파일을 참고하세요

## Path Aliases Configuration
프로젝트는 절대 경로 import를 지원합니다. 새로운 디렉토리를 `src/` 하위에 생성할 때는 반드시 다음 두 파일에 path alias를 추가해야 합니다.

### Required Steps When Creating New Directories
`src/` 하위에 새로운 디렉토리를 생성할 때:

1. **`tsconfig.json`에 path alias 추가**
   ```json
   "paths": {
     "components/*": ["src/components/*"],
     "새디렉토리명/*": ["src/새디렉토리명/*"]
   }
   ```

2. **`vite.config.ts`에 resolve alias 추가**
   ```typescript
   resolve: {
     alias: {
       components: path.resolve(__dirname, './src/components'),
       '새디렉토리명': path.resolve(__dirname, './src/새디렉토리명'),
     },
   }
   ```

3. **사용 예시**
   ```typescript
   // 절대 경로로 import
   import { SomeComponent } from '새디렉토리명/SomeComponent';
   ```

### Current Path Aliases
현재 설정된 path aliases:
- `components/*` → `src/components/*`
- `context/*` → `src/context/*`
- `pages/*` → `src/pages/*`
- `layout/*` → `src/layout/*`
- `utils/*` → `src/utils/*`
- `types/*` → `src/types/*`
- `data/*` → `src/data/*`
- `themes/*` → `src/themes/*`
- `menu-items/*` → `src/menu-items/*`

### Important Notes
- **필수 작업**: 새로운 디렉토리 생성 시 반드시 두 파일 모두 업데이트
- **일관성 유지**: 기존 alias 패턴을 따라야 함
- **디렉토리명 규칙**: 하이픈이 포함된 경우 따옴표로 감싸기 (예: `'menu-items'`)
- **절대 경로 사용**: 상대 경로(`../../`) 대신 절대 경로 사용 권장

## When Adding New Features
1. Check if similar functionality exists
2. Follow existing patterns and conventions
3. Create reusable components when appropriate
4. Add TypeScript types for new data structures
5. Update Context if global state is needed
6. Use existing utility functions when possible
7. Test with Korean (IME) input when applicable
8. **Test in both light and dark modes** - All UI changes must be verified in both modes
9. **Add path aliases** - When creating new directories under `src/`, update both `tsconfig.json` and `vite.config.ts` with path aliases
10. **Add menu items** - When creating a new page, **MUST** create a menu item file in `src/menu-items/` directory. See `mantis-layout-guide.mdc` for detailed instructions
